<!DOCTYPE html PUBLIC "-//W3C//Dtd XHTML 1.0 transitional//EN" "http://www.w3.org/tr/xhtml1/Dtd/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<ui:param name="root" value="#{request.contextPath}/" />

<ui:composition template="../WEB-INF/plantilla/layout.xhtml">
	<ui:define name="contenido">

		<h:form id="frm">
			<p:spacer height="5"/>
			
			<table id="tablaBusSol" border="1" bordercolor="#00BFFF">
				<tbody>
					<tr bordercolor="white">
						<td ><h:outputText styleClass="outputText" id="txtFechaInicio" value="Fecha de Inicio:" /></td>
						<td >
							<p:calendar  id="calFecIni" 
								pattern="dd/MM/yyyy" value="#{reportesMB.fechaInicio}" 
								showOn="button" maxlength="10" size="23"/>
						</td>
						<td ><p:graphicImage value="/resources/images/pregunta.jpg" id="tooltxtFecIni" /></td>
						<p:tooltip for="tooltxtFecIni" value="Fecha de Inicio" showEffect="fade" hideEffect="fade" />  
						
						<td ><h:outputText styleClass="outputText" id="txtFechaFin" value="Fecha de Fin" /></td>
						<td >
							<p:calendar  id="calFecFin" 
								pattern="dd/MM/yyyy" value="#{reportesMB.fechaFin}"
								showOn="button" maxlength="10" size="21"/>
						</td>
						<td ><p:graphicImage value="/resources/images/pregunta.jpg" id="tooltxtFecFin" /></td>
						<p:tooltip for="tooltxtFecFin" value="Fecha de Fin" showEffect="fade" hideEffect="fade" />  
						
					</tr>
					<tr bordercolor="white">
						<td ><h:outputText styleClass="outputText" id="txtEstado" value="Estado" /></td>
						<td >
							<p:selectCheckboxMenu id="scmEstados" label="--Todos--" value="#{reportesMB.lstEstadoSelected}" 
								panelStyle="width:220px;" style="width:162px;">  
						        <f:selectItems value="#{reportesMB.combosMB.estados}"/>  
						    </p:selectCheckboxMenu>  
						</td>	
						<td ><p:graphicImage value="/resources/images/pregunta.jpg" id="tooltxtEstado" /></td>
						<p:tooltip for="tooltxtEstado" value="Estado de la solicitud" showEffect="fade" hideEffect="fade" /> 
					</tr>
				</tbody>
			</table>
			
			<p:spacer height="10"/>
			
			<table border="0">
				<tr>
					<td>
						<p:commandButton value="Generar" actionListener="#{reportesMB.buscarSolicitudes}"  oncomplete="confirmation.show()"/>
					</td>
				</tr>	
			</table>	
			
			
			<p:confirmDialog id="confirmDialog" message="Que desea hacer?"  
                header="Generar Reporte Extractor" severity="alert" widgetVar="confirmation">  
                  
		        <p:commandButton id="confirm" value="Abrir"  oncomplete="confirmation.hide()"  
		                    actionListener="#{reportesMB.abrirExcel}" />  
		        
		        <p:commandButton id="decline" value="Grabar" onclick="PrimeFaces.monitorDownload(start, stop)" ajax="false"   
				        icon="ui-icon-arrowthichk-s" oncomplete="confirmation.hide()" actionListener="#{reportesMB.descargarArchivo}" >
				    <p:fileDownload value="#{reportesMB.file}" />  
				</p:commandButton>  
		                  
		    </p:confirmDialog>  
    
		</h:form>

	</ui:define>
</ui:composition>

</html>